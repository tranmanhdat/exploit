FROM ubuntu:18.04
WORKDIR /root
EXPOSE 21 80

RUN apt-get update && apt-get upgrade -y && \
    apt-get install -y wget build-essential curl gcc g++ make cmake openssl && \
    apt-get clean && rm -rf /var/lib/apt/lists/*

RUN wget -r ftp://ftp.proftpd.org/distrib/source/proftpd-1.3.5.tar.gz && \
    tar xvzf ftp.proftpd.org/distrib/source/proftpd-1.3.5.tar.gz && \
    cd proftpd-1.3.5 && ./configure --with-modules=mod_copy && make && make install
COPY proftpd.conf /etc
RUN useradd -rm -d /home/test -s /bin/bash -g root -G sudo -u 1001 -p "$(openssl passwd -1 123456)" test
COPY test_folder /home/test
CMD proftpd --nodaemon